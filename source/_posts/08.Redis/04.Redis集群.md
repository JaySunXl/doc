---
title: Redis基础
date: 2017-05-11
tags:
- Redis
- NoSQL
---
<!-- TOC -->

- [搭建集群](#搭建集群)
- [登录集群](#登录集群)
- [Q&A](#qa)

<!-- /TOC -->
# 搭建集群

各个节点的配置文件
```conf
daemonize yes
cluster-enabled yes
```

使用docker搭建分布式集群
```shell
docker run --name redis1 -p 127.0.0.1:6380:6379 -d redis:latest
docker run --name redis2 -p 127.0.0.1:6381:6379 -d redis:latest
docker run --name redis3 -p 127.0.0.1:6382:6379 -d redis:latest
docker run --name redis4 -p 127.0.0.1:6383:6379 -d redis:latest
docker run --name redis5 -p 127.0.0.1:6384:6379 -d redis:latest
# 测试是否创建成功
redis-cli -p 6380
......
# 创建集群
./src/redis-trib.rb create --replicas 1 127.0.0.1:6380 127.0.0.1:6381 127.0.0.1:6382 127.0.0.1:6383 127.0.0.1:6384
```

将本地主机的6380~6384分别映射为5个redis容器,

> 启动前确保没有持久化文件及上一个集群的信息:dump.rdb appendonly.aof nodes.conf

# 登录集群

```shell
redis-cli -c -h 127.0.0.1 -p 6380
# 查询集群结点信息
cluster nodes
# 查询集群状态信息
cluster info
```

# Q&A


[![](https://static.segmentfault.com/v-5b1df2a7/global/img/creativecommons-cc.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)