---
title: 工厂方法模式
date: 2017-07-01
tags:
- 设计模式
---


在工厂方法模式中,不再提供一个统一的工厂类来创建所有的产品对象,而是针对不同的产品提供不同的工厂,
系统提供一个与产品等级结构对应的工厂等级结构


定义一个用于创建对象的接口,让子类决定将哪一个类实例化.
实质上是让一个类的实例化延迟到其子类.


相比于简单工厂模式,多了一个抽象工厂角色,


```java
interface Factory {
    public Product factoryMethod();
}
```
```java
class ConcreteFactory implements Factory {
    public Product factoryMethod() {
        return new ConcreteProduct();
    }
}
```

```java
Factory factory = new ConcreteFactory();
Product product = factory.factoryMethod();
```

基于以上实现,
只需要关注所创建该产品的具体工厂即可,如上述代码的左侧变量都为抽象父类,
创建不同产品时, 只需要改变使用的具体工厂即可
在新加产品的情况下,需要同时新增工厂类,产品类继承对应抽象类

> 创建产品的工厂方法不能为`static`,因为工厂方法实际上为抽象方法,具体要有子类来实现
> 动态性和静态性冲突,Factory和ConcreteFactory中的工厂方法都不能`static`


使用java反射技术能够实现基于一个类名字符串创建一个对应的类对象
基于此,可以将具体工厂类写入配置文件,在不修改java代码的前提下更换创建的产品


> 此设计下每种工厂只生产一种产品,在产品很多的情况下
> 就会存在大量的工厂类和对应产品类