<details>
<summary>点击展开目录</summary>
<!-- TOC -->

- [不可变集合](#不可变集合)
- [特殊集合](#特殊集合)

<!-- /TOC -->
</details>

## 不可变集合

提供了各种以`Immutable`开头的集合类, 这样的都是不可变集合

以`ImmutableList`为例, 它继承自 `ImmutableCollection`抽象类, 在抽象层中, 对所有的集合所具有的写操作都进行了抛出`UnsupportedOperationException`处理, 同时标记为废弃

以`ImmutableList.of("a", "b");`进行内部分析,

```Java
public static <E> ImmutableList<E> of(E e1, E e2) {
    return construct(e1, e2);// 复数个的参数都是调用此方法
}
private static <E> ImmutableList<E> construct(Object... elements) {
    // 先进行非空判断, 不可变集合中不接受null值
    return asImmutableList(checkElementsNotNull(elements));
}
.......
static <E> ImmutableList<E> asImmutableList(Object[] elements, int length) {
    switch (length) {
        case 0:
        return of();
        case 1:
        return of((E) elements[0]);
        default:
        if (length < elements.length) {// 对数组进行遍历
            elements = Arrays.copyOf(elements, length);
        }
        return new RegularImmutableList<E>(elements);
    }
}
```

最终创建了 `RegularImmutableList` 类对象, 此类继承自 `ImmutableList`

## 特殊集合

Multiset
Multimap
BiMap
Table

一k对多v map: Multimap、HashMultimap

k-v中, v也唯一的map : BiMap

```Java
Multimap<String, String> map = HashMultimap.create();
BiMap<String, String> dbShortNameMap = HashBiMap.create();
```

```Java
// 分割集合
Lists.partition(users, 50)
```

