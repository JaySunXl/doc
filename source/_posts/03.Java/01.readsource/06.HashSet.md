---
title: 源码解读-HashSet
date: 2018-03-14
tags:
- Java
---

# HashSet

## 结构

```Java
private transient HashMap<E,Object> map;
public boolean add(E e) {
    return map.put(e, PRESENT)==null;
}
```

Collection <-- Set <-- HashSet
存储的内容是存储在Map的Key中,value不是那么重要.
底层以HashMap形式存在
主要功能方法实际上都是调用HashMap的方法

基本上可以说HashSet就是利用HashMap来实现的
add()方法添加元素,返回执行结果(boolean)

add()其实是调用HashMap的put, 在遇到key重复时, 返回的是false, 否则返回true

set中的元素实质上是HashMap的key, 所有元素的value都指向同一个Object对象,

**不重复的实现**

通过计算hashcode()和equals()方法来保证元素没有重复


size(),isEmpty(),remove(),contains(),clear()

等也都是在内部调用的HashMap的方法.


> 可以推测, TreeSet内部也是利用TreeMap实现

# LinkedHashSet

类似于LinkedHashMap继承自HashMap, LinkedHashSet继承自HashSet,对LinkedHashMap进行了封装,
同样的也没有实现自己的add()等方法.

# TreeSet




[![](https://static.segmentfault.com/v-5b1df2a7/global/img/creativecommons-cc.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)