
<details>
<summary>点击展开目录</summary>
<!-- TOC -->

- [库设计](#库设计)
- [表设计](#表设计)
    - [主键](#主键)
- [字段](#字段)

<!-- /TOC -->
</details>


## 库设计


## 表设计

### 主键

主键的作用:
1. 保证实体的完整性;
2. 加快数据库的操作速度
3. 在表中添加新记录时, 数据库会自动检查新记录的主键值, 不允许该值与其他记录的主键值重复.
4. 数据库自动按主键值的顺序显示表中的记录. 如果没有定义主键, 则按输入记录的顺序显示表中的记录.

主键不是非要不可, 可以从:

1. 是否满足业务要求
2. 数据查询效率(主键可以提高查询效率, 当然合理的索引替代也可以)
这两个角度权衡是否需要主键.

实际上, mysql的innodb引擎会给没有主键的表生成一个隐藏列作为主键字段

综上所述, 推荐在表中设计上主键, 如果没有业务上的主键, 可以设计一个主键仅用于区分数据

**使用自增还是uuid**

| 自增                             | uuid |
| :------------------------------- | :--- |
| 有序, 插入性能好, 索引占用空间小 |      |

## 字段

推荐给每个表都添加一下字段:
```sql
`create_time` timestamp not null default current_timestamp comment '创建时间',
`create_user` varchar(255) not null default '',
`update_time` timestamp not null default current_timestamp on update current_timestamp comment '更新时间',
`update_user` varchar(255) not null default '',
```
timestamp: 带有时区信息但范围小
datetime: 范围大但不带有时区信息

**枚举字段**

不推荐使用enum类型, 而推荐直接使用`tinyint(1)`
1. enum内部其实也是使用的`tinyint`
2. enum有索引值和实际值, 索引值从1开始; 当实际值为数字时, 容易产生误解

**货币值选型**

精确到整数级别可以使用`int`, 否则选用`Decimal`,
不能使用`float`或`double`, 会存在误差

**not null**
1. 索引性能好
2. count时结果准确
3. 空间占用, 如 `''`不占用空间, 而`null`则是占用空间

[![](https://static.segmentfault.com/v-5b1df2a7/global/img/creativecommons-cc.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)
