---
title: MySQL常用命令
date: 2016-07-04
tags:
- MySQL
---
<!-- TOC -->

- [重置mysql密码](#重置mysql密码)
- [备份](#备份)
- [恢复](#恢复)
- [记录](#记录)
- [执行文件](#执行文件)
- [导入导出数据](#导入导出数据)

<!-- /TOC -->

# 重置mysql密码

1. 关闭mysql服务
2. cd /usr/local/mysql/bin/
3. 登录管理员权限 sudo su
4. 禁止mysql验证功能 ./mysqld_safe --skip-grant-tables &
5. 此时服务状态为running
6. ./mysql
7. FLUSH PRIVILEGES;
8. set password for 'root'@'localhost'=1121

# 备份

备份指定数据库

```shell
# 备份指定数据库的指定表
mysqldump -h localhost -u root -p <dbname> <table1> <table2> [-d|t] > dump.sql
```
> -d:仅表结构
> -t:仅数据
> --ignore-table=database_name.table_name1:设置不备份的表
> --add-drop-table: create语句之前添加`drop table`

# 恢复


# 记录

实现与Oracle中的`spool`相似的功能

```shell
# 方式1
mysql -u root -p --tee=/mysql/log.log
# 方式2
tee log.log
notee
# 方式3
\T log.log
\t
```

# 执行文件

```shell
# mysql –u root –p123456 -Dtest</home/user/1.sql
\. <path>
source <path>
```


```sql
-- 隔离级别,设置隔离级别使用set transaction isolation levle
select @@session.tx_isolation;
```

#

MySQL DB的所有表:

```sql
select
    table_name '表名',
    column_name '列名',
    column_type '数据类型',
    data_type '字段类型',
    character_maximum_length '长度',
    is_nullable '是否为空',
    column_default '默认值',
    column_comment '备注'
from
    information_schema.columns
where
    table_schema ='lkapp'
-- and table_name  = 'article'
```

# 导入导出数据

```sql
load data infile '/tmp/user.csv'
into table user
fields terminated by ',' optionally enclosed by '"' escaped by '"'
lines terminated by '\r\n';
```

```sql
select * from user
into outfile '/tmp/user.csv'
fields terminated by ',' optionally enclosed by '"'
lines terminated by '\r\n';
```

配置:

> `show global variables like '%secure_file_priv%';`
>
> 修改文件`my.ini`: 添加`secure_file_priv=''`


[![](https://static.segmentfault.com/v-5b1df2a7/global/img/creativecommons-cc.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)