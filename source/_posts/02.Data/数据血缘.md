<details>
<summary>点击展开目录</summary>
<!-- TOC -->

- [表级别](#表级别)
- [字段级别](#字段级别)
- [参考](#参考)

<!-- /TOC -->
</details>




org.apache.hadoop.hive.ql.tools.LineageInfo


```Java
public static void main(String[] args)
        throws IOException, ParseException, SemanticException {
    String query = args[0];
    LineageInfo lep = new LineageInfo();
    lep.getLineageInfo(query);
    for (String tab : lep.getInputTableList()) {
      System.out.println("InputTable=" + tab);
    }
    for (String tab : lep.getOutputTableList()) {
      System.out.println("OutputTable=" + tab);
    }
  }
```

## 表级别

关键类: `org.apache.hadoop.hive.ql.tools.LineageInfo`

命令行调用方式:
```shell
hadoop jar /usr/local/hive/lib/hive-exec-1.1.0-cdh5.9.0.jar org.apache.hadoop.hive.ql.tools.LineageInfo <sql>
# InputTable=dict_cityinfo
# InputTable=dict_zoneinfo
# OutputTable=cxy7_dw.tmp_zone_info
```

java调用方式:
```Java
import org.apache.hadoop.hive.ql.tools.LineageInfo;
public class Demo {
    public static void main(String[] args) throws Exception {
        String sql = "";
        LineageInfo.main(new String[]{sql});
    }
}
```

## 字段级别

关键类: `org.apache.hadoop.hive.ql.hooks.LineageLogger`


## 参考

1. [1](http://cxy7.com/articles/2018/05/26/1527300004975.html)


[![](https://static.segmentfault.com/v-5b1df2a7/global/img/creativecommons-cc.svg)](https://creativecommons.org/licenses/by-nc-nd/4.0/)
